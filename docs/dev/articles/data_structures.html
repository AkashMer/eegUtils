<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A guide to eegUtils data structures • eegUtils</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="A guide to eegUtils data structures">
<meta property="og:description" content="eegUtils">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eegUtils</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.6.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/eegUtils.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_structures.html">A guide to eegUtils data structures</a>
    </li>
    <li>
      <a href="../articles/epoch-handling.html">Event and epoch handling</a>
    </li>
    <li>
      <a href="../articles/linear_modelling/linear_modelling.html">Linear Modelling</a>
    </li>
    <li>
      <a href="../articles/time-frequency-analysis.html">Frequency analysis</a>
    </li>
    <li>
      <a href="../articles/topoplot/topoplot.html">Building a topographical plot</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://www.twitter.com/matt_craddock">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/craddm/eegUtils/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="data_structures_files/header-attrs-2.9/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A guide to eegUtils data structures</h1>
                        <h4 class="author">Matt Craddock</h4>
            
            <h4 class="date">2021-07-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/craddm/eegUtils/blob/master/vignettes/data_structures.Rmd"><code>vignettes/data_structures.Rmd</code></a></small>
      <div class="hidden name"><code>data_structures.Rmd</code></div>

    </div>

    
    
<div id="eegutils" class="section level2">
<h2 class="hasAnchor">
<a href="#eegutils" class="anchor"></a>eegUtils</h2>
<p><code>eegUtils</code> uses S3 objects to store EEG data and associated information such as channel locations. Using different object classes for data structured in different ways ensures that the various plotting functions work consistently across different types of EEG data. For example, there are different classes for epoched (<code>eeg_epochs</code>) and continuous data (<code>eeg_data</code>), and for time-frequency representations of data (<code>eeg_tfr</code>).</p>
</div>
<div id="eeg_data-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#eeg_data-objects" class="anchor"></a><code>eeg_data</code> objects</h2>
<p><code>eeg_data</code> objects are the base class used for continuous data. When raw data is imported, the output is this class. This class is a list constituting the following entries:</p>
<ul>
<li>
<code>signals</code>
<ul>
<li>A data frame containing the actual EEG data in wide format. Each column is data from a single electrode, each row from a single timepoint.</li>
</ul>
</li>
<li>
<code>srate</code>
<ul>
<li>A single numeric value giving the sampling rate of the data in Hz</li>
</ul>
</li>
<li>
<code>events</code>
<ul>
<li>A data.frame/tibble with 3 columns describing the events recorded in the data.
<ul>
<li>event_onset (in samples) relative to <em>recording onset</em>
</li>
<li>event_time (in seconds) relative to <em>recording onset</em>
</li>
<li>event_type (typically integer, others possible)</li>
</ul>
</li>
</ul>
</li>
<li>
<code>chan_info</code>
<ul>
<li>Often NULL on import, since BDF and CNT do not contain (usable) electrode locations.</li>
<li>A data.frame/tibble containing channel location information can be added. Currently similar to EEGLAB style, with the following columns (may change):
<ul>
<li>
<code>electrode</code> - electrode names</li>
<li>
<code>radius</code> - Spherical co-ordinates (Radius is typically normalized to 1)</li>
<li>
<code>theta</code> - Spherical co-ordinates (theta)</li>
<li>
<code>phi</code> - Spherical co-ordinates (theta)</li>
<li>
<code>cart_x</code> - Cartesian 3D coordinates</li>
<li>
<code>cart_y</code> - Cartesian 3D coordinates</li>
<li>
<code>cart_z</code> - Cartesian 3D coordinates</li>
<li>
<code>x</code> - 2D Stereographic projection of the spherical coordinates</li>
<li>
<code>y</code> - 2D Stereographic projection of the spherical coordinates</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu">eegUtils</span><span class="fu">:::</span><span class="va">electrodeLocs</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 9</span>
<span class="co">#&gt;   electrode radius theta   phi cart_x cart_y cart_z      x     y</span>
<span class="co">#&gt;   &lt;fct&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1 LPA            1  -119    13 -86.1   -20.0 -48.0  -116.  -26.8</span>
<span class="co">#&gt; 2 RPA            1   119   -13  85.8   -20.0 -48.0   116.  -26.8</span>
<span class="co">#&gt; 3 Nz             1   115    90   0.01   86.8 -40.0     0   115  </span>
<span class="co">#&gt; 4 Fp1            1   -94   -71 -29.4    83.9  -6.99  -30.6  88.9</span>
<span class="co">#&gt; 5 Fpz            1    91    90   0.11   88.2  -1.71    0    91  </span>
<span class="co">#&gt; 6 Fp2            1    94    71  29.9    84.9  -7.08   30.6  88.9</span></code></pre></div>
</li>
</ul>
</li>
<li>
<code>timings</code>
<ul>
<li>A data.frame containing a description of each row in time (s) and sample numbers (samples)</li>
</ul>
</li>
<li>
<code>epochs</code>
<ul>
<li>A data.frame containing information about the epochs in the data, more relevant for epoched data.</li>
</ul>
</li>
<li>
<code>reference</code>
<ul>
<li>NA on loading, in the absence of a recorded reference channel.</li>
<li>Once data is referenced, is a list consisting of two entries.
<ul>
<li>
<code>ref_chans</code> - Labels for channels used to calculate the reference data. Can also be “average”.</li>
<li>
<code>excluded</code> - Labels for any channels excluded from the reference data.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div id="eeg_epochs" class="section level2">
<h2 class="hasAnchor">
<a href="#eeg_epochs" class="anchor"></a>eeg_epochs</h2>
<p><code>eeg_epochs</code> objects share the same overall structure with <code>eeg_data</code> objects, but some of the internals currently differ, as described below.</p>
<ul>
<li>
<code>events</code>
<ul>
<li>The events table has two additional columns, <code>epoch</code> and <code>time</code>.
<ul>
<li>
<code>epoch</code> gives the epoch number to which a given event belongs</li>
<li>
<code>time</code> gives the time point at which the event occurs relative to the <em>epoch onset</em>
</li>
<li>
<code>event_time</code> still gives the time point at which the event occurs relative to the <em>recording onset</em>
</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/events.html">events</a></span><span class="op">(</span><span class="va">demo_epochs</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 80 x 5</span>
<span class="co">#&gt;    event_onset event_time event_type epoch  time</span>
<span class="co">#&gt;          &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1        4128       8.06        208     1     0</span>
<span class="co">#&gt;  2        7037      13.7         213     2     0</span>
<span class="co">#&gt;  3       10043      19.6         215     3     0</span>
<span class="co">#&gt;  4       12928      25.2         213     4     0</span>
<span class="co">#&gt;  5       15868      31.0         207     5     0</span>
<span class="co">#&gt;  6       18777      36.7         207     6     0</span>
<span class="co">#&gt;  7       21578      42.1         213     7     0</span>
<span class="co">#&gt;  8       24554      48.0         213     8     0</span>
<span class="co">#&gt;  9       27379      53.5         222     9     0</span>
<span class="co">#&gt; 10       30306      59.2         208    10     0</span>
<span class="co">#&gt; # ... with 70 more rows</span></code></pre></div>
</li>
<li>
<code>timings</code>
<ul>
<li>The timings table has one additional column, <code>epoch</code>.
<ul>
<li>
<code>epoch</code> gives the epoch number to which a given datapoint belongs</li>
<li>
<code>sample</code> still uniquely identifies each datapoint</li>
<li>
<code>time</code> now gives the time relative to the zero-point of the epoch, i.e. the <em>event</em> on which the epoch is centred.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">demo_epochs</span><span class="op">$</span><span class="va">timings</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   epoch sample   time</span>
<span class="co">#&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1   4028 -0.197</span>
<span class="co">#&gt; 2     1   4032 -0.189</span>
<span class="co">#&gt; 3     1   4036 -0.182</span>
<span class="co">#&gt; 4     1   4040 -0.174</span>
<span class="co">#&gt; 5     1   4044 -0.166</span>
<span class="co">#&gt; 6     1   4048 -0.158</span></code></pre></div>
</li>
<li>
<code>epochs</code>
<ul>
<li>A data.frame containing information about the participant, and labels applied to any epochs</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/epochs.html">epochs</a></span><span class="op">(</span><span class="va">demo_epochs</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 80 x 4</span>
<span class="co">#&gt;    epoch recording epoch_label participant_id</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;lgl&gt;     &lt;lgl&gt;       &lt;chr&gt;         </span>
<span class="co">#&gt;  1     1 NA        NA          001           </span>
<span class="co">#&gt;  2     2 NA        NA          001           </span>
<span class="co">#&gt;  3     3 NA        NA          001           </span>
<span class="co">#&gt;  4     4 NA        NA          001           </span>
<span class="co">#&gt;  5     5 NA        NA          001           </span>
<span class="co">#&gt;  6     6 NA        NA          001           </span>
<span class="co">#&gt;  7     7 NA        NA          001           </span>
<span class="co">#&gt;  8     8 NA        NA          001           </span>
<span class="co">#&gt;  9     9 NA        NA          001           </span>
<span class="co">#&gt; 10    10 NA        NA          001           </span>
<span class="co">#&gt; # ... with 70 more rows</span></code></pre></div>
</li>
</ul>
</div>
<div id="eeg_tfr" class="section level2">
<h2 class="hasAnchor">
<a href="#eeg_tfr" class="anchor"></a>eeg_tfr</h2>
<p><code>eeg_tfr</code> objects hold time-frequency representations of <code>eeg_epochs</code> objects.</p>
<ul>
<li>
<code>signals</code>
<ul>
<li>a 4D matrix - epoch by time by electrode by frequency</li>
</ul>
</li>
<li>
<code>dimensions</code>
<ul>
<li>keeps track of which matrix dimension corresponds to which property.</li>
</ul>
</li>
</ul>
</div>
<div id="eeg_ica" class="section level2">
<h2 class="hasAnchor">
<a href="#eeg_ica" class="anchor"></a>eeg_ICA</h2>
<p><code>eeg_ICA</code> objects contain the results of either an ICA or an SSD decomposition applied to an <code>eeg_epochs</code> object.</p>
<ul>
<li>
<code>mixing_matrix</code>
<ul>
<li>The weights that are used to convert the source data into the original data</li>
</ul>
</li>
<li>
<code>unmixing_matrix</code>
<ul>
<li>The weights that are used to convert the original data into source data</li>
</ul>
</li>
<li>
<code>signals</code> - individual component activations</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matt Craddock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
